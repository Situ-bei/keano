const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/APlayer.min-CAgWaKXK.js","assets/commonjsHelpers-Cpj98o6Y.js"])))=>i.map(i=>d[i]);
import{j as g,l as h,p as P,u as A,_ as S,q as w,r as G,o as I,m as x,g as E,a as i,v as L,d as C}from"./app-DxcyfeZo.js";import B from"./MyIcon-DzYHTa7d.js";import{a as N}from"./axios-CoTZsgdJ.js";import{s as v}from"./store.legacy-B1fuAWBq.js";import{_ as k}from"./plugin-vue_export-helper-DlAUqK2U.js";import"./commonjsHelpers-Cpj98o6Y.js";const T=`
  <div class="custom-aplayer">
    <button class="custom-play">播放</button>
    <button class="custom-pause">暂停</button>
    <div class="custom-progress">
      <div class="custom-loaded"></div>
      <div class="custom-played"></div>
    </div>
  </div>
`,q=g({__name:"NavMusic",setup(b,{expose:c}){c();let l,s=h(!1),o=[];const u=()=>{s.value=!s.value},d=()=>{s.value&&(s.value=!1)},m=()=>{const e=document.querySelector(".vp-navbar-end");if(!e)return;if(!document.querySelector("#MyMusic_Menu")){const a=document.createElement("div");a.id="MyMusic_Menu",a.classList.add("nav-item"),a.innerHTML='<div id="MyMusic_icon" class="btnImg"></div>',e.appendChild(a)}const t=document.querySelector("#MyMusic_Menu");t.onclick=a=>{u(),a.stopPropagation()};const n=document.querySelector(".MyMusic");n.onclick=a=>{a.stopPropagation()}},p=()=>{if(!l)return;const e=window,t=document.getElementById("GlobalAPlayer");!t||o.length<1||(r(),t.classList.contains("aplayer"))||(e.GlobalAPlayer=new l({container:document.getElementById("GlobalAPlayer"),audio:o,lrcType:3,listFolded:!1,listMaxHeight:"324px",mini:!1,fixed:!1,volume:2,storageName:"GlobalAPlayer"}),e.GlobalAPlayer.on("play",function(){r()}),e.GlobalAPlayer.on("pause",function(){r()}))};function r(){var t,n;const e=window;e.GlobalAPlayer&&e.GlobalAPlayer.mode&&(e.GlobalAPlayer.paused?(t=document.getElementById("MyMusic_icon"))==null||t.setAttribute("spin","false"):(n=document.getElementById("MyMusic_icon"))==null||n.setAttribute("spin","true"))}const y=v.get("localMusicList"),f=async()=>{y?(o=y,M()):await N({method:"get",url:"https://api.injahow.cn/meting/?server=netease&type=playlist&id=596766562&auth=:auth&r=:r",params:{}}).then(e=>{const t=e.data;t&&t.length>0&&(v.set("localMusicList",t),o=t,console.log("又获取列表了")),M()}).catch(e=>{console.error("加载音乐列表失败:",e)})},M=()=>{const e=A();S(()=>import("./APlayer.min-CAgWaKXK.js").then(t=>t.A),__vite__mapDeps([0,1])).then(t=>{w(()=>{l=t.default,m(),p()}),e.afterEach(()=>{setTimeout(()=>{m(),p()},50)})})};P(()=>{f()});const _={get APlayer(){return l},set APlayer(e){l=e},get IsShow(){return s},set IsShow(e){s=e},get GlobalMusicList(){return o},set GlobalMusicList(e){o=e},customTemplate:T,SwitchStatus:u,CloseStatus:d,InsertMenu:m,NewPlayer:p,AddBtnSpin:r,localMusicList:y,LoadMusicList:f,creatAplayer:M,MyIcon:B};return Object.defineProperty(_,"__isScriptSetup",{enumerable:!1,value:!0}),_}}),O={class:"MyMusic"};function j(b,c,l,s,o,u){const d=G("ClientOnly");return I(),x(d,null,{default:E(()=>[i("div",O,[i("div",{class:L(["MyMusic_Play",{hide:!s.IsShow}])},[i("div",{class:"close",onClick:s.CloseStatus},[C(s.MyIcon,{name:"guanbi"})]),c[0]||(c[0]=i("div",{id:"GlobalAPlayer"},[i("div",{class:"aplayer-lrc"})],-1))],2)])]),_:1})}const F=k(q,[["render",j],["__file","NavMusic.vue"]]);export{F as default};
