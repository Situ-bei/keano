import{u as N,j as te,p as ae,q as I,v as se,P as le,x as Ee,y as oe,l as j,z as S,A as ie,w as $,k as a,B as re,R as M,C as ne,D as ue,E as ce,G as de,H as Be,I as ge,J as Ae,L as ye,M as he,N as me,O as ve,Q as V,S as O,T as pe,U as f,V as Fe}from"./app-o_KPy3y-.js";const Ce=["/","/intro.html","/demo/","/demo/disable.html","/demo/encrypt.html","/demo/layout.html","/demo/markdown.html","/demo/page.html","/en/","/en/intro.html","/essay/","/essay/%E5%8F%AF%E6%98%AF.html","/essay/%E9%9D%A2%E6%9C%9D%E5%A4%A7%E6%B5%B7%EF%BC%8C%E6%98%A5%E6%9A%96%E8%8A%B1%E5%BC%80.html","/life/","/study/","/en/demo/","/en/demo/disable.html","/en/demo/encrypt.html","/en/demo/layout.html","/en/demo/markdown.html","/en/demo/page.html","/en/posts/cherry.html","/en/posts/dragonfruit.html","/en/posts/strawberry.html","/en/posts/tomato.html","/life/books/","/life/books/%E9%9D%A2%E6%9C%9D%E5%A4%A7%E6%B5%B7%EF%BC%8C%E6%98%A5%E6%9A%96%E8%8A%B1%E5%BC%80.html","/life/movie/","/life/movie/markdown.html","/life/music/","/life/music/%E3%80%8A%E5%AF%8C%E5%A3%AB%E5%B1%B1%E4%B8%8B%E3%80%8B.html","/life/music/%E3%80%8A%E7%8E%B0%E4%BB%A3%E7%88%B1%E6%83%85%E6%95%85%E4%BA%8B%E3%80%8B.html","/life/music/%E9%9F%B3%E4%B9%90%E6%A0%87%E7%AD%BE%E5%B1%9E%E6%80%A7%E8%AF%A6%E8%A7%A3.html","/study/coding/","/study/history/","/study/wiki/","/study/wiki/%E5%85%89%E4%BC%8F%E6%9D%BF.html","/study/wiki/%E6%88%91%E5%9C%A8%E6%9D%91%E9%87%8C%E6%8D%A1%E5%A5%BD%E5%8F%A5.html","/study/wiki/%E6%98%BE%E7%A4%BA%E6%8A%80%E6%9C%AF%E5%8F%91%E5%B1%95%E5%8F%B2.html","/study/wiki/%E9%9B%AA%E8%8A%B1%E7%9A%84%E9%9B%85%E7%A7%B0.html","/en/posts/apple/1.html","/en/posts/apple/2.html","/en/posts/apple/3.html","/en/posts/apple/4.html","/en/posts/banana/1.html","/en/posts/banana/2.html","/en/posts/banana/3.html","/en/posts/banana/4.html","/study/coding/CSS/CSS2%E5%9F%BA%E7%A1%80.html","/study/coding/CSS/CSS3%E5%9F%BA%E7%A1%80.html","/study/coding/CSS/Less.html","/study/coding/CSS/","/study/coding/CSS/Tailwind.html","/study/coding/CSS/%E5%93%8D%E5%BA%94%E5%BC%8F%E5%B8%83%E5%B1%80.html","/study/coding/CSS/%E7%A7%BB%E5%8A%A8%E7%AB%AF%E5%B8%83%E5%B1%80.html","/study/coding/HTML/HTML.html","/study/coding/HTML/HTML4%E5%9F%BA%E7%A1%80%E7%9F%A5%E8%AF%86.html","/study/coding/HTML/HTML5%E5%9F%BA%E7%A1%80.html","/study/coding/HTML/","/study/coding/JS/ES%E5%9F%BA%E7%A1%80%E6%A6%82%E5%BF%B5.html","/study/coding/JS/ES%E6%A8%A1%E5%9D%97%E5%8C%96(ESM).html","/study/coding/JS/JavaScript.html","/study/coding/JS/JavaScript%E6%80%9D%E7%BB%B4%E5%AF%BC%E5%9B%BE.html","/study/coding/JS/","/study/coding/JS/Web%20APIs(DOM%EF%BC%8CBOM).html","/study/coding/JS/%E4%B8%80%E4%BA%9B%E5%B8%B8%E7%94%A8%E7%9A%84%E6%96%B9%E6%B3%95.html","/study/coding/NodeJS/Node.js.html","/study/coding/NodeJS/Node.html","/study/coding/NodeJS/","/study/coding/NodeJS/nvm%20---%20%20%E4%B8%80%E4%B8%AAnodejs%E7%89%88%E6%9C%AC%E7%AE%A1%E7%90%86%E5%B7%A5%E5%85%B7%EF%BC%81.html","/study/coding/Vue/","/study/coding/Vue/Vue2.html","/study/coding/Vue/Vue3.0.html","/study/coding/Vue/Vue%E5%9F%BA%E7%A1%80%E5%BC%80%E5%8F%91%E7%8E%AF%E5%A2%83.html","/study/coding/Vue/vite.html","/study/coding/git/Git.html","/study/coding/git/","/study/coding/interview/HTML5%E5%9F%BA%E7%A1%80.html","/study/coding/interview/","/study/coding/interview/%E6%B5%8F%E8%A7%88%E5%99%A8%E7%9A%84%E7%BC%93%E5%AD%98%E5%8E%9F%E7%90%86.html","/study/history/overview/","/study/history/overview/%E8%8F%B2%E5%BE%8B%E5%AE%BE.html","/404.html","/en/posts/","/en/posts/apple/","/en/posts/banana/","/category/","/category/%E4%BD%BF%E7%94%A8%E6%8C%87%E5%8D%97/","/category/%E6%8C%87%E5%8D%97/","/category/%E7%94%9F%E6%B4%BB/","/category/%E9%98%85%E8%AF%BB/","/category/%E9%9F%B3%E4%B9%90/","/category/%E7%99%BE%E7%A7%91/","/category/%E5%89%8D%E7%AB%AF/","/category/css/","/category/html/","/category/js/","/category/nodejs/","/category/vue/","/category/git/","/category/%E6%B5%8F%E8%A7%88%E5%99%A8%E5%8E%9F%E7%90%86/","/category/%E5%8E%86%E5%8F%B2/","/category/%E4%BA%BA%E6%96%87/","/en/category/","/en/category/guide/","/en/category/cherry/","/en/category/dragon-fruit/","/en/category/fruit/","/en/category/strawberry/","/en/category/vegetable/","/en/category/apple/","/en/category/banana/","/tag/","/tag/%E7%A6%81%E7%94%A8/","/tag/%E5%8A%A0%E5%AF%86/","/tag/%E5%B8%83%E5%B1%80/","/tag/markdown/","/tag/%E9%A1%B5%E9%9D%A2%E9%85%8D%E7%BD%AE/","/tag/%E4%BD%BF%E7%94%A8%E6%8C%87%E5%8D%97/","/tag/%E8%AF%97%E6%AD%8C/","/tag/%E6%B5%B7%E5%AD%90/","/tag/%E7%B2%A4%E8%AF%AD%E6%AD%8C%E6%9B%B2/","/tag/%E5%AD%A6%E5%94%B1/","/tag/%E5%AF%8C%E5%A3%AB%E5%B1%B1%E4%B8%8B/","/tag/%E9%99%88%E5%A5%95%E8%BF%85/","/tag/%E3%80%8A%E7%8E%B0%E4%BB%A3%E7%88%B1%E6%83%85%E6%95%85%E4%BA%8B%E3%80%8B/","/tag/%E9%9F%B3%E4%B9%90%E7%9F%A5%E8%AF%86/","/tag/%E5%85%89%E4%BC%8F/","/tag/%E8%AE%A9%E6%88%91%E4%BB%AC%E5%8F%98%E5%BE%97%E6%9B%B4%E5%BC%BA%E5%A4%A7/","/tag/%E9%9F%B3%E4%B9%90/","/tag/%E6%89%8B%E6%9C%BA/","/tag/%E5%B1%8F%E5%B9%95/","/tag/%E6%96%87%E5%8C%96%E5%B8%B8%E8%AF%86/","/tag/%E9%9B%AA%E8%8A%B1/","/tag/css/","/tag/css2/","/tag/css%E5%9F%BA%E7%A1%80/","/tag/css3/","/tag/less/","/tag/%E9%A2%84%E7%BC%96%E8%AF%91%E5%99%A8/","/tag/tailwind/","/tag/%E5%93%8D%E5%BA%94%E5%BC%8F%E5%B8%83%E5%B1%80/","/tag/%E7%A7%BB%E5%8A%A8%E7%AB%AF%E5%B8%83%E5%B1%80/","/tag/vw/","/tag/html/","/tag/html4/","/tag/html5/","/tag/js/","/tag/js%E5%9F%BA%E7%A1%80/","/tag/js%E6%A8%A1%E5%9D%97%E5%8C%96/","/tag/js-%E5%9F%BA%E7%A1%80/","/tag/js%E6%96%B9%E6%B3%95/","/tag/nodejs/","/tag/nodejs-%E5%9F%BA%E7%A1%80/","/tag/%E6%9D%8E%E7%AB%8B%E8%B6%85/","/tag/nvm/","/tag/%E5%89%8D%E7%AB%AF/","/tag/vue2.0/","/tag/vue3.0/","/tag/vue%E7%94%9F%E6%80%81/","/tag/vite/","/tag/git/","/tag/%E6%B5%8F%E8%A7%88%E5%99%A8%E5%8E%9F%E7%90%86/","/tag/%E6%B8%B8%E8%A7%88%E5%99%A8%E7%BC%93%E5%AD%98/","/tag/%E9%9D%A2%E8%AF%95/","/tag/%E7%94%B5%E5%AD%90%E5%9C%B0%E5%9B%BE%E5%86%8C/","/tag/%E4%B8%9C%E7%9B%9F%E5%8D%81%E5%9B%BD/","/tag/%E7%8E%8B%E9%AA%81/","/tag/%E5%9B%BD%E9%99%85%E6%94%BF%E6%B2%BB/","/en/tag/","/en/tag/disable/","/en/tag/encryption/","/en/tag/layout/","/en/tag/markdown/","/en/tag/page-config/","/en/tag/guide/","/en/tag/red/","/en/tag/small/","/en/tag/round/","/en/tag/big/","/en/tag/yellow/","/en/tag/curly/","/en/tag/long/","/article/","/en/article/","/star/","/en/star/","/timeline/","/en/timeline/","/en/essay/"],De="SEARCH_PRO_QUERY_HISTORY",h=N(De,[]),Se=()=>{const{queryHistoryCount:s}=f,l=s>0;return{enabled:l,queryHistory:h,addQueryHistory:E=>{l&&(h.value=Array.from(new Set([E,...h.value.slice(0,s-1)])))},removeQueryHistory:E=>{h.value=[...h.value.slice(0,E),...h.value.slice(E+1)]}}},T=s=>Ce[s.id]+("anchor"in s?`#${s.anchor}`:""),fe="SEARCH_PRO_RESULT_HISTORY",{resultHistoryCount:P}=f,m=N(fe,[]),we=()=>{const s=P>0;return{enabled:s,resultHistory:m,addResultHistory:l=>{if(s){const E={link:T(l),display:l.display};"header"in l&&(E.header=l.header),m.value=[E,...m.value.slice(0,P-1)]}},removeResultHistory:l=>{m.value=[...m.value.slice(0,l),...m.value.slice(l+1)]}}},He=s=>{const l=de(),E=I(),w=Be(),i=j(0),F=S(()=>i.value>0),g=ge([]);return Ae(()=>{const{search:A,terminate:H}=ye(),v=pe(u=>{const p=u.join(" "),{searchFilter:k=B=>B,splitWord:b,suggestionsFilter:q,...y}=l.value;p?(i.value+=1,A(u.join(" "),E.value,y).then(B=>k(B,p,E.value,w.value)).then(B=>{i.value-=1,g.value=B}).catch(B=>{console.warn(B),i.value-=1,i.value||(g.value=[])})):g.value=[]},f.searchDelay-f.suggestDelay);$([s,E],([u])=>v(u),{immediate:!0}),he(()=>{H()})}),{isSearching:F,results:g}};var be=te({name:"SearchResult",props:{queries:{type:Array,required:!0},isFocusing:Boolean},emits:["close","updateQuery"],setup(s,{emit:l}){const E=ae(),w=I(),i=se(le),{enabled:F,addQueryHistory:g,queryHistory:A,removeQueryHistory:H}=Se(),{enabled:v,resultHistory:u,addResultHistory:p,removeResultHistory:k}=we(),b=F||v,q=Ee(s,"queries"),{results:y,isSearching:B}=He(q),o=oe({isQuery:!0,index:0}),c=j(0),d=j(0),x=S(()=>b&&(A.value.length>0||u.value.length>0)),R=S(()=>y.value.length>0),L=S(()=>y.value[c.value]||null),U=()=>{const{isQuery:e,index:t}=o;t===0?(o.isQuery=!e,o.index=e?u.value.length-1:A.value.length-1):o.index=t-1},_=()=>{const{isQuery:e,index:t}=o;t===(e?A.value.length-1:u.value.length-1)?(o.isQuery=!e,o.index=0):o.index=t+1},Y=()=>{c.value=c.value>0?c.value-1:y.value.length-1,d.value=L.value.contents.length-1},G=()=>{c.value=c.value<y.value.length-1?c.value+1:0,d.value=0},z=()=>{d.value<L.value.contents.length-1?d.value+=1:G()},W=()=>{d.value>0?d.value-=1:Y()},Q=e=>e.map(t=>Fe(t)?t:a(t[0],t[1])),K=e=>{if(e.type==="customField"){const t=me[e.index]||"$content",[r,D=""]=ve(t)?t[w.value].split("$content"):t.split("$content");return e.display.map(n=>a("div",Q([r,...n,D])))}return e.display.map(t=>a("div",Q(t)))},C=()=>{c.value=0,d.value=0,l("updateQuery",""),l("close")},X=()=>F?a("ul",{class:"search-pro-result-list"},a("li",{class:"search-pro-result-list-item"},[a("div",{class:"search-pro-result-title"},i.value.queryHistory),A.value.map((e,t)=>a("div",{class:["search-pro-result-item",{active:o.isQuery&&o.index===t}],onClick:()=>{l("updateQuery",e)}},[a(V,{class:"search-pro-result-type"}),a("div",{class:"search-pro-result-content"},e),a("button",{class:"search-pro-remove-icon",innerHTML:O,onClick:r=>{r.preventDefault(),r.stopPropagation(),H(t)}})]))])):null,Z=()=>v?a("ul",{class:"search-pro-result-list"},a("li",{class:"search-pro-result-list-item"},[a("div",{class:"search-pro-result-title"},i.value.resultHistory),u.value.map((e,t)=>a(M,{to:e.link,class:["search-pro-result-item",{active:!o.isQuery&&o.index===t}],onClick:()=>{C()}},()=>[a(V,{class:"search-pro-result-type"}),a("div",{class:"search-pro-result-content"},[e.header?a("div",{class:"content-header"},e.header):null,a("div",e.display.map(r=>Q(r)).flat())]),a("button",{class:"search-pro-remove-icon",innerHTML:O,onClick:r=>{r.preventDefault(),r.stopPropagation(),k(t)}})]))])):null;return ie("keydown",e=>{if(s.isFocusing){if(R.value){if(e.key==="ArrowUp")W();else if(e.key==="ArrowDown")z();else if(e.key==="Enter"){const t=L.value.contents[d.value];g(s.queries.join(" ")),p(t),E.push(T(t)),C()}}else if(v){if(e.key==="ArrowUp")U();else if(e.key==="ArrowDown")_();else if(e.key==="Enter"){const{index:t}=o;o.isQuery?(l("updateQuery",A.value[t]),e.preventDefault()):(E.push(u.value[t].link),C())}}}}),$([c,d],()=>{var e;(e=document.querySelector(".search-pro-result-list-item.active .search-pro-result-item.active"))==null||e.scrollIntoView(!1)},{flush:"post"}),()=>a("div",{class:["search-pro-result-wrapper",{empty:s.queries.length?!R.value:!x.value}],id:"search-pro-results"},s.queries.length?B.value?a(re,{hint:i.value.searching}):R.value?a("ul",{class:"search-pro-result-list"},y.value.map(({title:e,contents:t},r)=>{const D=c.value===r;return a("li",{class:["search-pro-result-list-item",{active:D}]},[a("div",{class:"search-pro-result-title"},e||i.value.defaultTitle),t.map((n,ee)=>{const J=D&&d.value===ee;return a(M,{to:T(n),class:["search-pro-result-item",{active:J,"aria-selected":J}],onClick:()=>{g(s.queries.join(" ")),p(n),C()}},()=>[n.type==="text"?null:a(n.type==="title"?ne:n.type==="heading"?ue:ce,{class:"search-pro-result-type"}),a("div",{class:"search-pro-result-content"},[n.type==="text"&&n.header?a("div",{class:"content-header"},n.header):null,a("div",K(n))])])})])})):i.value.emptyResult:b?x.value?[X(),Z()]:i.value.emptyHistory:i.value.emptyResult)}});export{be as default};
