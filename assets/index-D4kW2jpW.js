const t={jsdelivr:t=>`https://cdn.jsdelivr.net/npm/${t}`,unpkg:t=>`https://unpkg.com/${t}`};class e{constructor(){this.providers={...t},this.provider="jsdelivr"}
/**
   * Get the fastest provider name.
   * If none of the providers returns a valid response within `timeout`, an error will be thrown.
   */async getFastestProvider(t=5e3,e="npm2url/dist/index.cjs"){const n=new AbortController;let r=0;try{return await new Promise(((o,s)=>{Promise.all(Object.entries(this.providers).map((async([t,r])=>{try{await async function(t,e){const n=await fetch(t,{signal:e});if(!n.ok)throw n;await n.text()}(r(e),n.signal),o(t)}catch{}}))).then((()=>s(new Error("All providers failed")))),r=setTimeout(s,t,new Error("Timed out"))}))}finally{n.abort(),clearTimeout(r)}}
/**
   * Set the current provider to the fastest provider found by `getFastestProvider`.
   */async findFastestProvider(t,e){return this.provider=await this.getFastestProvider(t,e),this.provider}setProvider(t,e){e?this.providers[t]=e:delete this.providers[t]}getFullUrl(t,e=this.provider){if(t.includes("://"))return t;const n=this.providers[e];if(!n)throw new Error(`Provider ${e} not found`);return n(t)}}class n{constructor(){this.listeners=[]}tap(t){return this.listeners.push(t),()=>this.revoke(t)}revoke(t){const e=this.listeners.indexOf(t);e>=0&&this.listeners.splice(e,1)}revokeAll(){this.listeners.splice(0)}call(...t){for(const e of this.listeners)e(...t)}}const r=Math.random().toString(36).slice(2,8);let o=0;function s(){return o+=1,`mm-${r}-${o}`}function i(){}function a(t,e){const n=(t,r)=>e(t,(()=>{var e;return null==(e=t.children)?void 0:e.map((e=>n(e,t)))}),r);return n(t)}function c(t,...e){const n=(t||"").split(" ").filter(Boolean);return e.forEach((t=>{t&&n.indexOf(t)<0&&n.push(t)})),n.join(" ")}function l(t){if("string"==typeof t){const e=t;t=t=>t.tagName===e}const e=t;return function(){let t=Array.from(this.childNodes);return e&&(t=t.filter((t=>e(t)))),t}}function d(t,e){return(...n)=>e(t,...n)}function u(){const t={};return t.promise=new Promise(((e,n)=>{t.resolve=e,t.reject=n})),t}function f(t,e){const n={timer:0};function r(){n.timer&&(window.clearTimeout(n.timer),n.timer=0)}function o(){r(),n.args&&(n.result=t(...n.args))}return function(...t){return r(),n.args=t,n.timer=window.setTimeout(o,e),n.result}}
/*! @gera2ld/jsx-dom v2.2.2 | ISC License */const p="http://www.w3.org/1999/xlink",h={show:p,actuate:p,href:p};function v(t,e,...n){return function(t,e){let n;if("string"==typeof t)n=1;else{if("function"!=typeof t)throw new Error("Invalid VNode type");n=2}return{vtype:n,type:t,props:e}}(t,e=Object.assign({},e,{children:1===n.length?n[0]:n}))}function m(t){return t.children}const y={isSvg:!1};function w(t,e){Array.isArray(e)||(e=[e]),(e=e.filter(Boolean)).length&&t.append(...e)}const g={className:"class",labelFor:"for"};function b(t,e,n,r){if(e=g[e]||e,!0===n)t.setAttribute(e,"");else if(!1===n)t.removeAttribute(e);else{const o=r?h[e]:void 0;void 0!==o?t.setAttributeNS(o,e,n):t.setAttribute(e,n)}}function j(t,e){return Array.isArray(t)?t.map((t=>j(t,e))).reduce(((t,e)=>t.concat(e)),[]):k(t,e)}function k(t,e=y){if(null==t||"boolean"==typeof t)return null;if(t instanceof Node)return t;if(2===(null==(n=t)?void 0:n.vtype)){const{type:n,props:r}=t;if(n===m){const t=document.createDocumentFragment();if(r.children){w(t,j(r.children,e))}return t}return k(n(r),e)}var n;if((t=>"string"==typeof t||"number"==typeof t)(t))return document.createTextNode(`${t}`);if((t=>1===(null==t?void 0:t.vtype))(t)){let n;const{type:r,props:o}=t;if(e.isSvg||"svg"!==r||(e=Object.assign({},e,{isSvg:!0})),n=e.isSvg?document.createElementNS("http://www.w3.org/2000/svg",r):document.createElement(r),function(t,e,n){for(const r in e)if("key"!==r&&"children"!==r&&"ref"!==r)if("dangerouslySetInnerHTML"===r)t.innerHTML=e[r].__html;else if("innerHTML"===r||"textContent"===r||"innerText"===r||"value"===r&&["textarea","select"].includes(t.tagName)){const n=e[r];null!=n&&(t[r]=n)}else r.startsWith("on")?t[r.toLowerCase()]=e[r]:b(t,r,e[r],n.isSvg)}(n,o,e),o.children){let t=e;e.isSvg&&"foreignObject"===r&&(t=Object.assign({},t,{isSvg:!1}));const s=j(o.children,t);null!=s&&w(n,s)}const{ref:s}=o;return"function"==typeof s&&s(n),n}throw new Error("mount: Invalid Vnode!")}function x(...t){return k(v(...t))}const A=function(t){const e={};return function(...n){const r=`${n[0]}`;let o=e[r];return o||(o={value:t(...n)},e[r]=o),o.value}}((t=>{document.head.append(x("link",{rel:"preload",as:"script",href:t}))})),S={},E={};async function P(t,e){var n;const r="script"===t.type&&(null==(n=t.data)?void 0:n.src)||"";if(t.loaded||(t.loaded=S[r]),!t.loaded){const n=u();if(t.loaded=n.promise,"script"===t.type&&(document.head.append(x("script",{...t.data,onLoad:()=>n.resolve(),onError:n.reject})),r?S[r]=t.loaded:n.resolve()),"iife"===t.type){const{fn:r,getParams:o}=t.data;r(...(null==o?void 0:o(e))||[]),n.resolve()}}await t.loaded}async function T(t,e){t.forEach((t=>{var e;"script"===t.type&&(null==(e=t.data)?void 0:e.src)&&A(t.data.src)})),e={getMarkmap:()=>window.markmap,...e};for(const n of t)await P(n,e)}async function N(t){await Promise.all(t.map((t=>async function(t){const e="stylesheet"===t.type&&t.data.href||"";if(t.loaded||(t.loaded=E[e]),!t.loaded){const n=u();t.loaded=n.promise,e&&(E[e]=t.loaded),"style"===t.type?(document.head.append(x("style",{textContent:t.data})),n.resolve()):e&&(document.head.append(x("link",{rel:"stylesheet",...t.data})),fetch(e).then((t=>{if(t.ok)return t.text();throw t})).then((()=>n.resolve()),n.reject))}await t.loaded}(t))))}function O(t){return{type:"script",data:{src:t}}}function $(t){return{type:"stylesheet",data:{href:t}}}export{n as H,e as U,d as a,O as b,$ as c,f as d,c as e,l as f,s as g,N as h,T as l,i as n,a as w};
