const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/APlayer.min-CAgWaKXK.js","assets/commonjsHelpers-Cpj98o6Y.js"])))=>i.map(i=>d[i]);
import{j as P,p as h,l as A,J as L,_ as S,W as w,r as G,o as I,m as x,f as E,a as r,X as C,b as B}from"./app-BU0bo4Sb.js";import N from"./MyIcon-BbU8Q78e.js";import{a as k}from"./axios-CoTZsgdJ.js";import{s as T}from"./store.legacy-B1fuAWBq.js";import{_ as R}from"./plugin-vue_export-helper-DlAUqK2U.js";import"./commonjsHelpers-Cpj98o6Y.js";const q=`
  <div class="custom-aplayer">
    <button class="custom-play">播放</button>
    <button class="custom-pause">暂停</button>
    <div class="custom-progress">
      <div class="custom-loaded"></div>
      <div class="custom-played"></div>
    </div>
  </div>
`,O=P({__name:"NavMusic",setup(v,{expose:u}){u();const n=h();let s,o=A(!1),l=[];const d=()=>{o.value=!o.value},g=()=>{o.value&&(o.value=!1)},p=()=>{const e=document.querySelector(".vp-navbar-end");if(!e)return;if(!document.querySelector("#MyMusic_Menu")){const a=document.createElement("div");a.id="MyMusic_Menu",a.classList.add("nav-item"),a.innerHTML='<div id="MyMusic_icon" class="btnImg"></div>',e.appendChild(a)}const t=document.querySelector("#MyMusic_Menu");t.onclick=a=>{d(),a.stopPropagation()};const c=document.querySelector(".MyMusic");c.onclick=a=>{a.stopPropagation()}},y=()=>{if(!s)return;const e=window,t=document.getElementById("GlobalAPlayer");!t||l.length<1||(m(),t.classList.contains("aplayer"))||(e.GlobalAPlayer=new s({container:document.getElementById("GlobalAPlayer"),audio:l,lrcType:3,listFolded:!1,listMaxHeight:"324px",mini:!1,fixed:!1,volume:2,storageName:"GlobalAPlayer"}),console.log("播放器已创建",e.GlobalAPlayer.audio),e.GlobalAPlayer.on("play",function(){m()}),e.GlobalAPlayer.on("pause",function(){m()}))};function m(){var t,c;const e=window;e.GlobalAPlayer&&e.GlobalAPlayer.mode&&(e.GlobalAPlayer.paused?(t=document.getElementById("MyMusic_icon"))==null||t.setAttribute("spin","false"):(c=document.getElementById("MyMusic_icon"))==null||c.setAttribute("spin","true"))}const b=T.get("localMusicList");let i="https://api.i-meto.com/meting/api?server=netease&type=playlist&id=596766562&r=:r";const f=async()=>{console.log("url",i),await k({method:"get",url:i,params:{}}).then(e=>{console.log("获取音乐数据,判断之前",e.data.message),e.data.message=="请求次数已达上限，请明天再试"&&(alert("音乐API请求次数已达上限，请明天再试"),i="//api.injahow.cn/meting/?server=netease&type=playlist&id=596766562&auth=:auth&r=:r",alert("赋值"),f());const t=e.data;t&&t.length>0&&(l=t,console.log("又获取列表了,进入列表判断",e)),M()}).catch(e=>{console.error("加载音乐列表失败:",e)})},M=()=>{S(()=>import("./APlayer.min-CAgWaKXK.js").then(e=>e.A),__vite__mapDeps([0,1])).then(e=>{w(()=>{s=e.default,p(),y()}),n==null||n.afterEach(()=>{setTimeout(()=>{p(),y()},50)})})};L(()=>{f()});const _={router:n,get APlayer(){return s},set APlayer(e){s=e},get IsShow(){return o},set IsShow(e){o=e},get GlobalMusicList(){return l},set GlobalMusicList(e){l=e},customTemplate:q,SwitchStatus:d,CloseStatus:g,InsertMenu:p,NewPlayer:y,AddBtnSpin:m,localMusicList:b,get musicListURL(){return i},set musicListURL(e){i=e},LoadMusicList:f,creatAplayer:M,MyIcon:N};return Object.defineProperty(_,"__isScriptSetup",{enumerable:!1,value:!0}),_}}),W={class:"MyMusic"};function j(v,u,n,s,o,l){const d=G("ClientOnly");return I(),x(d,null,{default:E(()=>[r("div",W,[r("div",{class:C(["MyMusic_Play",{hide:!s.IsShow}])},[r("div",{class:"close",onClick:s.CloseStatus},[B(s.MyIcon,{name:"guanbi"})]),u[0]||(u[0]=r("div",{id:"GlobalAPlayer"},[r("div",{class:"aplayer-lrc"})],-1))],2)])]),_:1})}const J=R(O,[["render",j],["__file","NavMusic.vue"]]);export{J as default};
